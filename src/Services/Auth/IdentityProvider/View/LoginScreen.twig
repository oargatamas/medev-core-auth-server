{% extends ["@",service,"/Base.twig"]|join %}



{% block content %}



    <div class="card animated" style="position:absolute;">

        <h1 class="errorBox" style="color:red">{{ errorMsg }}</h1>

        <!-- Card content -->
        <div class="card-body">

            <div id="loginWithPassword" style="height:200px;">
                <form method="post" action="{{ loginUrl }}">
                    Username<br/>
                    <input name="username" type="text"/><br/>
                    Password<br/>
                    <input name="password" type="password"/><br/>
                    <input type="submit" value="Sign in"/>
                </form>
                <a href="{{ forgotUrl }}">Forgot password</a>
            </div>
        </div>

    </div>

    <div class="card animated" style="position:absolute;">

        <h1 class="errorBox" style="color:red">{{ errorMsg }}</h1>

        <!-- Card content -->
        <div class="card-body">

            <div id="requestLoginCode">
                Username<br/>
                <input id="usermail" type="text"/><br/>
                <button id="requestCode">Request code</button>
            </div>

        </div>

    </div>


    <div class="card animated" style="position:absolute;">

        <h1 class="errorBox" style="color:red">{{ errorMsg }}</h1>

        <!-- Card content -->
        <div class="card-body">

            <form method="post" action="{{ loginUrl }}">
                Verification code<br/>
                <input name="code" type="text"/><br/>
                <input type="submit" value="Sign in"/>
                <input type="hidden" name="type" value="{{ codeLogin }}"/>
            </form>

        </div>
    </div>


{% endblock %}


{% block scripts %}
    <script>
        $(document).ready(function () {
            initLoginCodeRequest();
            initCardLinks();
        });


        function initLoginCodeRequest(){
            $("div#loginWithPassword_Container").show();
            $("div#requestLoginCode_Container").hide();
            $("div#loginWithAuthCode_Container").hide();


            $("button#requestCode").click((event) => {
                event.preventDefault();

                console.log($("input#usermail").val());

                $.ajax({
                    url: "{{ codeUrl }}",
                    method: "post",
                    data: {
                        "usermail": $("input#usermail").val(),
                    },
                    success: (data, status, jqxhr) => {
                        console.log(data);
                        alert(data);
                    },
                    error: (data, status, jqxhr) => {
                        console.log(data);
                        $("h1#errorBox").html(data.responseJSON);
                    },
                });
            });
        }

        function initCardLinks(){

        }
    </script>
{% endblock %}